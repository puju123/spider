<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pujun.spider.storage.SpiderDoc">
  <resultMap id="all" type="com.pujun.spider.storage.SpiderDoc">
    <result property="id" column="id"/>
    <result property="title" column="title"/>
    <result property="fetchtime" column="fetchtime"/>
    <result property="html" column="html"/>
    <result property="content" column="content"/>
    <result property="pubdate" column="pubdate"/>
    <result property="author" column="author"/>
    <result property="original" column="original"/>
    <result property="url" column="url"/>
    <result property="status" column="status"/>
    <result property="charset" column="charset"/>
    <result property="fetchcode" column="fetchcode"/>
  </resultMap>
  <resultMap id="urlOnly" type="com.pujun.spider.storage.SpiderDoc">
    <result property="id" column="id"/>
    <result property="url" column="url"/>
    <result property="status" column="status"/>
  </resultMap>
  <insert id="add" parameterType="com.pujun.spider.storage.SpiderDoc" useGeneratedKeys="true" keyProperty="id"> 
    insert into spider_doc(id,title,fetchtime,html,content,pubdate,author,original,url,status,charset,fetchcode) VALUES(#{id},#{title},#{fetchtime},#{html},#{content},#{pubdate},#{author},#{original},#{url},#{status},#{charset},#{fetchcode})
    ON DUPLICATE KEY UPDATE
    title = #{title},fetchtime = #{fetchtime}, html = #{html}, content = #{content}, pubdate = #{pubdate}, author = #{author},original = #{original},status = #{status},charset = #{charset},fetchcode = #{fetchcode}
  </insert>
  <insert id="addList" parameterType="com.pujun.spider.storage.SpiderDoc" useGeneratedKeys="true" keyProperty="id"> 
     insert into spider_doc(id,title,fetchtime,html,content,pubdate,author,original,url,status,charset,fetchcode) VALUES
     <foreach collection="list" item="item" index="index" separator=",">
         (#{id},#{title},#{fetchtime},#{html},#{content},#{pubdate},#{author},#{original},#{url},#{status},#{charset},#{fetchcode})
     </foreach>

  </insert>
  <select id="selectall" resultMap="urlOnly">
      select id,url,status from spider_doc
  </select>
  <select id="selectlimit" resultMap="urlOnly" parameterType="java.util.Map">
      select id,url,status FROM spider_doc.spider_doc limit #{startKey},#{size}
  </select>
</mapper>